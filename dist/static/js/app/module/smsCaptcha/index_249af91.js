"use strict";define("js/app/module/smsCaptcha/index",["js/lib/jquery-2.1.4","js/app/controller/base","js/app/util/dialog","js/app/interface/GeneralCtr"],function(i,t,e,o){function n(t){this.options=i.extend({},this.defaultOptions,t),s=this.options;var e=this;i("#"+this.options.id).off("click").on("click",function(i){i.stopPropagation(),i.preventDefault(),e.options.checkInfo()&&e.handleSendVerifiy()})}var s={},r=t.getUrlParam("lang")||"ZH_CN";return n.prototype.defaultOptions={id:"getVerification",mobile:"mobile",interCode:"interCode",checkInfo:function(){return i("#"+this.mobile).valid()},sendCode:"805953"},n.prototype.handleSendVerifiy=function(){var e=this,n=i("#"+this.options.id);n.prop("disabled",!0),t.showLoading(),o.sendCaptcha(this.options.sendCode,{bizType:this.options.bizType,mobile:i("#"+this.options.mobile).val()}).then(function(){t.hideLoading();var i=60;e.timer=window.setInterval(function(){i>0?n.text(i--+"s"):(n.text(t.getText("获取验证码",r)).prop("disabled",!1),clearInterval(e.timer))},1e3)},function(){t.hideLoading(),e.options.errorFn&&e.options.errorFn(),n.text(t.getText("获取验证码",r)).prop("disabled",!1)})},{init:function(i){new n(i)}}});